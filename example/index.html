<!doctype html>
<html>
	<head>
	<meta content="text/html; charset=UTF-8" http-equiv="content-type" />
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<link href="lib/bootstrap/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
	<script src="lib/bootstrap/js/bootstrap.min.js" crossorigin="anonymous"></script>
	<style>
		html,body{
			margin:0;
			padding: 0;
		}
		#mycanvas_container{
			overflow: auto;
			text-align: center;
			height: 100%;
			position: relative;
			margin: auto;
		}
		
	</style>
	</head>
	<body>
		<div class="container text-left" style="max-width: 100%; max-height: 100%; overflow: hidden;">
			<div class="row" style="width: 100%; overflow: hidden;">
			  <div class="col-2">
				Column
			  </div>
			  <div class="col-8">
				<div id="mycanvas_container"></div>
			  </div>
			  <div class="col-2">
				<img id="previewImg" width="200" />
			  </div>
			</div>
		  </div>
		
	</body>
	<script type="module">	
		import JEditor from "../dist/j-editor.esm.js";

		const container = document.getElementById('mycanvas_container');
		container.style.height = window.innerHeight + 'px';

		const editor = new JEditor(container, {
			width: 600,
			height: 800
		});

		editor.background.url = 'https://jtcospublic.ciccten.com/public/image/bf.jpg';

		const img = editor.createImage('https://pixijs.com/assets/bunny.png');
		img.width = 100;
		img.height = 100;

		img.on('load', () => {
			//img.resize(100, 100);
			
			img.x = editor.width / 2;
			img.y = editor.height / 2;

			const img2 = editor.createImage('https://pixijs.com/assets/bunny.png');
			img2.width = 200;
			img2.height = 200;

			img2.x = img.x;
			img2.y = img.y;
			img2.angle = 45;
			editor.addChild(img2);
		});
		editor.addChild(img);

		const preview = document.getElementById('previewImg');
		editor.on('ticker', async (delta) => {
			const data = await editor.toImage();
			if(data !== preview.src) preview.src = data;
		});
	</script>
</html>